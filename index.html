<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Granat Group Coins</title>
    <link rel="stylesheet" href="./style.css" />
    <script src="./auth.js" defer></script>
  </head>

  <body>
    <!-- HEADER -->
    <header class="header">
      <div class="header__inner">
        <nav class="nav">
          <a class="nav__link" href="#home">Главная</a>
          <a class="nav__link" href="#rules">Условия</a>
          <a class="nav__link" href="#marathon">Марафон</a>
        </nav>

        <a class="brand" href="#home" aria-label="Granat Group Coins">
          <img class="brand__logo" src="./gg-mark.png" alt="Granat Group" />
        </a>

        <nav class="nav nav--right">
          <a class="nav__link" href="#rating">Рейтинг</a>
          <a class="nav__link" href="#shop">Магазин</a>
          <button id="logoutBtn" class="nav__link nav__btn" type="button" title="Выйти">
            Выйти
          </button>
        </nav>
      </div>
    </header>

    <!-- HERO -->
    <section id="home" class="hero">
      <div class="hero__media" aria-hidden="true">
        <video class="hero__video" src="./hero.mp4" autoplay muted loop playsinline></video>
        <div class="hero__overlay"></div>
      </div>

      <div class="container hero__content">
        <div class="hero__card">
          <div class="hero__pill">Играй. Зарабатывай. Развивайся с Granat Group!</div>

          <h1 class="hero__title">Granat Group<br />Coins</h1>

          <p class="hero__subtitle">
            Внутренняя валюта Granat Group: получай Coins за результат, инициативу и участие — и
            обменивай на подарки.
          </p>

          <div class="hero__actions">
            <a class="btn btn--primary" href="#rating">Смотреть рейтинг</a>
            <a class="btn btn--ghost" href="#shop">Перейти в магазин</a>
          </div>
        </div>

        <div class="hero__right">
          <a
            class="btn btn--telegram"
            href="https://t.me/granatgroupfamily"
            target="_blank"
            rel="noopener"
          >
            Вопросы по GG Coins? Напиши нам в Telegram →
          </a>
        </div>
      </div>
    </section>

    <!-- WHAT IS -->
    <section class="section">
      <div class="container">
        <h2 class="section__title">Что такое Granat Coins?</h2>
        <p class="section__lead">
          Granat Coins — это внутренняя валюта для поощрения сотрудников за значимые достижения и
          участие во внутренних проектах компании.
        </p>

        <div class="cards">
          <article
            class="card card--img"
            style="--card-img:url('./cup.png'); --card-size:180px; --card-op:.70;"
          >
            <h3 class="card__title">За результат</h3>
            <p class="card__text">Начисления за достижения, вклад в качество и сильные показатели.</p>
          </article>

          <article
            class="card card--img"
            style="--card-img:url('./lamp.png'); --card-size:180px; --card-op:.70;"
          >
            <h3 class="card__title">За инициативу</h3>
            <p class="card__text">
              Идеи, участие в активностях, поддержка команды и внутренние проекты.
            </p>
          </article>

          <article
            class="card card--img"
            style="--card-img:url('./people.png'); --card-size:180px; --card-op:.70;"
          >
            <h3 class="card__title">За участие</h3>
            <p class="card__text">
              Марафоны, конкурсы, HR-активности — всё фиксируется и отражается в рейтинге.
            </p>
          </article>
        </div>

        <!-- мягкий fallback если какие-то png реально сломаны -->
        <script>
          (function () {
            const fallbacks = {
              "cup.png":
                "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 128 128'%3E%3Cpath fill='%23b12a2a' d='M36 20h56v18h10c10 0 18 8 18 18s-8 18-18 18h-2c-3 15-16 26-32 26h-8c-16 0-29-11-32-26h-2C16 74 8 66 8 56s8-18 18-18h10V20zm-10 34h-2c-1 0-2 1-2 2s1 2 2 2h2v-4zm78 0v4h2c1 0 2-1 2-2s-1-2-2-2h-2z'/%3E%3Cpath fill='%23000' opacity='.12' d='M44 104h40v10H44z'/%3E%3C/svg%3E",
              "lamp.png":
                "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 128 128'%3E%3Cpath fill='%23b12a2a' d='M64 10c-22 0-40 18-40 40 0 16 10 30 24 36v10c0 6 5 10 10 10h12c6 0 10-4 10-10V86c14-6 24-20 24-36 0-22-18-40-40-40z'/%3E%3Cpath fill='%23fff' opacity='.35' d='M46 54c0-12 9-22 22-22 6 0 11 2 15 6-4-8-12-14-23-14-13 0-24 11-24 24 0 4 1 8 3 11 4-1 7-3 7-5z'/%3E%3Cpath fill='%23000' opacity='.12' d='M50 112h28v6H50z'/%3E%3C/svg%3E",
              "people.png":
                "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 128 128'%3E%3Cpath fill='%23b12a2a' d='M44 62c10 0 18-8 18-18S54 26 44 26 26 34 26 44s8 18 18 18zm40 0c10 0 18-8 18-18S94 26 84 26 66 34 66 44s8 18 18 18z'/%3E%3Cpath fill='%23b12a2a' opacity='.9' d='M22 112c0-18 14-32 32-32s32 14 32 32H22zm44 0c0-18 14-32 32-32s32 14 32 32H66z'/%3E%3C/svg%3E",
            };

            document.querySelectorAll(".card--img").forEach((el) => {
              const v = el.getAttribute("style") || "";
              const m = v.match(/--card-img:url\('\.\/([^']+)'\)/);
              if (!m) return;
              const file = m[1];

              const img = new Image();
              img.onerror = () => {
                if (fallbacks[file]) {
                  el.style.setProperty("--card-img", `url('${fallbacks[file]}')`);
                }
              };
              img.src = "./" + file;
            });
          })();
        </script>
      </div>
    </section>

    <!-- RULES -->
    <section id="rules" class="section section--tight">
      <div class="container center">
        <h2 class="section__title">Условия</h2>
        <p class="section__lead">Правила получения и использования доступны в PDF.</p>

        <!-- target=_blank чтобы точно открывалось на Pages + не ломалось download -->
        <a class="btn btn--primary btn--pdf" href="./rules.pdf" target="_blank" rel="noopener">
          Скачать условия получения (PDF)
        </a>

        <p class="muted mt-16">
          Информация по суммам за отчётный месяц актуализируется ежемесячно, до 5 числа.
        </p>
      </div>
    </section>

    <!-- MARATHON -->
    <section id="marathon" class="section section--tight">
      <div class="container">
        <h2 class="section__title">Марафон</h2>
        <p class="section__lead">Раздел в разработке / наполнение позже.</p>
      </div>
    </section>

    <!-- RATING -->
    <section id="rating" class="section section--rating">
      <div class="container">
        <h2 class="section__title">Рейтинг</h2>

        <div class="rating-toolbar">
          <div id="tabs" class="tabs">
            <button class="tab active" data-scope="all" type="button">Все</button>
            <button class="tab" data-scope="operators" type="button">Операторы</button>
            <button class="tab" data-scope="aup" type="button">АУП</button>
          </div>

          <input id="search" class="search" type="search" placeholder="Поиск сотрудника..." />

          <button id="refresh" class="btn btn--ghost btn--sm" type="button">Обновить</button>
        </div>

        <div id="status" class="status muted">—</div>

        <div class="table-wrap">
          <table class="table">
            <thead>
              <tr>
                <th class="th-num">#</th>
                <th data-sort="name">Сотрудник</th>
                <th class="th-num" data-sort="earned">Начислено</th>
                <th class="th-num" data-sort="spent">Потрачено</th>
                <th class="th-num" data-sort="balance">Остаток</th>
                <th class="th-right">Связь</th>
              </tr>
            </thead>
            <tbody id="tbody">
              <tr>
                <td colspan="6" class="muted">Нет данных</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- SHOP (вернул твои картинки как было) -->
    <section id="shop" class="section section--tight">
      <div class="container">
        <h2 class="section__title">Магазин</h2>
        <p class="section__lead">Обменивай GG Coins на подарки — выбирай категорию.</p>

        <div class="shop-grid">
          <article class="shop-card">
            <div class="shop-card__top">
              <img class="shop-card__img" src="./ozon.png" alt="Ozon" />
            </div>
            <div class="shop-card__body">
              <h3 class="shop-card__title">Ozon</h3>
              <p class="shop-card__text">Товары / сертификаты</p>
            </div>
          </article>

          <article class="shop-card">
            <div class="shop-card__top">
              <img class="shop-card__img" src="./wb.png" alt="Wildberries" />
            </div>
            <div class="shop-card__body">
              <h3 class="shop-card__title">Wildberries</h3>
              <p class="shop-card__text">Товары / сертификаты</p>
            </div>
          </article>

          <article class="shop-card">
            <div class="shop-card__top">
              <img class="shop-card__img" src="./tgpremium.png" alt="Telegram Premium" />
            </div>
            <div class="shop-card__body">
              <h3 class="shop-card__title">Telegram Premium</h3>
              <p class="shop-card__text">Подписка</p>
            </div>
          </article>

          <article class="shop-card">
            <div class="shop-card__top">
              <img class="shop-card__img" src="./surprice.png" alt="Сюрприз" />
            </div>
            <div class="shop-card__body">
              <h3 class="shop-card__title">Сюрприз</h3>
              <p class="shop-card__text">Подарок-сюрприз</p>
            </div>
          </article>

          <article class="shop-card shop-card--wide">
            <div class="shop-card__top">
              <img class="shop-card__img" src="./gggift.png" alt="Корп. подарки" />
            </div>
            <div class="shop-card__body">
              <h3 class="shop-card__title">Корп. подарки</h3>
              <p class="shop-card__text">Мерч / корпоративные подарки</p>
            </div>
          </article>
        </div>

        <p class="shop-note muted">Нет нужной категории — напиши в Telegram, добавим.</p>
      </div>
    </section>

    <script src="./app.js" type="module"></script>
  </body>
</html>
